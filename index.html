<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gen Z Chat Translator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background: #e0e0e0;
      font-family: 'Poppins', Arial, sans-serif;
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    body.dark-mode {
      background: #2c2c2c;
      color: #e0e0e0;
    }
    .container {
      background: #e0e0e0;
      border-radius: 16px;
      padding: 60px 20px 20px 20px;
      width: 100%;
      max-width: 500px;
      box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.1), -8px -8px 16px rgba(255, 255, 255, 0.7);
      text-align: center;
      position: relative;
      transition: transform 0.3s ease;
      animation: slideIn 0.8s ease-out forwards;
    }
    body.dark-mode .container {
      background: #2c2c2c;
      box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.4), -8px -8px 16px rgba(255, 255, 255, 0.1);
    }
    .container:hover {
      transform: translateY(-5px);
    }
    #themeButton, #emojiButton {
      position: absolute;
      top: 10px;
      font-size: 24px;
      cursor: pointer;
      transition: transform 0.2s ease, color 0.2s ease, border-color 0.2s ease, background 0.2s ease, box-shadow 0.2s ease;
      padding: 8px;
      border: 2px solid #ff2e7e;
      border-radius: 12px;
      background: linear-gradient(145deg, #ff4a8e, #e0256e);
      color: #fff;
      box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1), -4px -4px 8px rgba(255, 255, 255, 0.7);
    }
    #themeButton {
      left: 10px;
    }
    #themeButton:hover, #emojiButton:hover {
      transform: scale(1.1);
      color: #00d4ff;
      border-color: #00d4ff;
      background: linear-gradient(145deg, #e0256e, #cc1e5f);
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.2), inset -2px -2px 4px rgba(255, 255, 255, 0.5);
    }
    #themeButton:active, button:active, .copy-btn:active {
      animation: bounce 0.3s ease;
    }
    body.dark-mode #themeButton, body.dark-mode #emojiButton {
      color: #fff;
      border-color: #ff5a9e;
      background: linear-gradient(145deg, #ff6aae, #e0508e);
      box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4), -4px -4px 8px rgba(255, 255, 255, 0.1);
    }
    body.dark-mode #themeButton:hover, body.dark-mode #emojiButton:hover {
      border-color: #00d4ff;
      background: linear-gradient(145deg, #d41f64, #bf1b58);
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.5), inset -2px -2px 4px rgba(255, 255, 255, 0.2);
    }
    h1 {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 15px;
      color: #ff2e7e;
    }
    body.dark-mode h1 {
      color: #ff5a9e;
    }
    textarea {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      resize: vertical;
      min-height: 100px;
      font-family: 'Poppins', Arial, sans-serif;
      color: #333;
      background: #e0e0e0;
      box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.1), inset -4px -4px 8px rgba(255, 255, 255, 0.7);
      transition: box-shadow 0.3s ease;
    }
    textarea:focus {
      outline: none;
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.2), inset -2px -2px 4px rgba(255, 255, 255, 0.5);
    }
    textarea::placeholder {
      color: #666;
      animation: typing 4s steps(40, end) infinite;
      overflow: hidden;
      white-space: nowrap;
    }
    body.dark-mode textarea {
      color: #e0e0e0;
      background: #2c2c2c;
      box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.4), inset -4px -4px 8px rgba(255, 255, 255, 0.1);
    }
    body.dark-mode textarea:focus {
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.5), inset -2px -2px 4px rgba(255, 255, 255, 0.2);
    }
    body.dark-mode textarea::placeholder {
      color: #aaa;
    }
    .buttons-bottom {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin: 15px 0;
    }
    button, .copy-btn {
      padding: 12px;
      border: none;
      border-radius: 12px;
      background: linear-gradient(145deg, #ff4a8e, #e0256e);
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.1), -4px -4px 8px rgba(255, 255, 255, 0.7);
    }
    button:hover, .copy-btn:hover {
      transform: translateY(-2px);
      background: linear-gradient(145deg, #e0256e, #cc1e5f);
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.2), inset -2px -2px 4px rgba(255, 255, 255, 0.5);
    }
    body.dark-mode button, body.dark-mode .copy-btn {
      background: linear-gradient(145deg, #ff6aae, #e0508e);
      box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.4), -4px -4px 8px rgba(255, 255, 255, 0.1);
    }
    body.dark-mode button:hover, body.dark-mode .copy-btn:hover {
      background: linear-gradient(145deg, #d41f64, #bf1b58);
      box-shadow: inset 2px 2px 4px rgba(0, 0, 0, 0.5), inset -2px -2px 4px rgba(255, 255, 255, 0.2);
    }
    .footer {
      margin-top: 15px;
      font-size: 14px;
      color: #666;
    }
    body.dark-mode .footer {
      color: #aaa;
    }
    .output-section {
      margin-top: 20px;
      background: #e0e0e0;
      padding: 15px;
      border-radius: 12px;
      text-align: left;
      min-height: 100px;
      box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.1), inset -4px -4px 8px rgba(255, 255, 255, 0.7);
      animation: pulse 1s ease-in-out;
    }
    body.dark-mode .output-section {
      background: #2c2c2c;
      box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.4), inset -4px -4px 8px rgba(255, 255, 255, 0.1);
    }
    .output-section h3 {
      font-weight: 600;
      margin-bottom: 10px;
      color: #ff2e7e;
    }
    body.dark-mode .output-section h3 {
      color: #ff5a9e;
    }
    #outputText {
      font-size: 16px;
      min-height: 60px;
      overflow-wrap: break-word;
      white-space: pre-wrap;
      opacity: 0;
      animation: fadeIn 0.5s ease forwards;
      color: #333;
    }
    body.dark-mode #outputText {
      color: #e0e0e0;
    }
    #outputText strong {
      font-weight: 700;
    }
    #outputText ul {
      margin: 10px 0 10px 20px;
    }
    #outputText li {
      margin-bottom: 5px;
    }
    .word-of-day {
      margin-top: 10px;
      font-size: 14px;
      font-style: italic;
      color: #666;
    }
    body.dark-mode .word-of-day {
      color: #aaa;
    }
    @keyframes slideIn {
      from {
        transform: translateY(100vh);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    @keyframes bounce {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(0.9);
      }
    }
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.02);
      }
    }
    @keyframes typing {
      0% {
        width: 0;
      }
      50% {
        width: 100%;
      }
      100% {
        width: 0;
      }
    }
    @media (max-width: 600px) {
      .container {
        padding: 60px 15px 15px 15px;
        border-radius: 12px;
        animation: slideIn 0.6s ease-out forwards; /* Faster for mobile */
      }
      h1 {
        font-size: 20px;
      }
      textarea {
        font-size: 14px;
      }
      textarea::placeholder {
        animation: typing 3s steps(30, end) infinite; /* Adjusted for mobile */
      }
      button, .copy-btn {
        font-size: 14px;
        padding: 10px;
      }
      #themeButton {
        font-size: 20px;
        padding: 6px;
      }
      .output-section {
        animation: pulse 0.8s ease-in-out; /* Slightly faster pulse */
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <span id="themeButton" onclick="toggleTheme()" title="Toggle Theme">üåü</span>
    <h1>üí¨ Gen Z Chat Translator üòé</h1>
    <div class="word-of-day" id="wordOfDay"></div>
    <textarea id="inputText" placeholder="Type in English or Hinglish (e.g., Bhai, kya scene hai?)..."></textarea>
    <div class="buttons-bottom">
      <button onclick="genZConvert()">Gen Z Text Converter üßÉ</button>
      <button onclick="genZReply()">Gen Z Reply üòé</button>
    </div>
    <div class="output-section" id="outputSection">
      <h3>Output</h3>
      <p id="outputText">Translation or reply appears here...</p>
      <button class="copy-btn" onclick="copyOutput()">Copy üìã</button>
    </div>
    <p class="footer">Made with ‚ù§Ô∏è by Zeel</p>
  </div>
  <script>
    let isDarkMode = false;
    const loadingMessages = [
      "Load ho raha hai bhai! ‚è≥", "Chill maro, ban raha hai! üî•",
      "Thodi der, vibe check chal raha! üòé", "Ruk ja, bussin‚Äô output coming! ü´∂",
      "Bhai, sab lit hai, loading! ‚ú®"
    ];
    const genZWords = [
      { word: "Slay", meaning: "To do something amazingly well" },
      { word: "Lit", meaning: "Really fun, exciting, or amazing" },
      { word: "Bet", meaning: "Agreed or confirmed" },
      { word: "Yeet", meaning: "To throw or express excitement" }
    ];
    const slangMap = {
      "lit": "Really fun, exciting, or amazing",
      "slay": "To do something amazingly well",
      "bet": "Agreed or confirmed",
      "yeet": "To throw or express excitement",
      "fr fr": "For real, for real (truthfully)",
      "pop off": "To go all out or succeed",
      "no cap": "Honestly, no lie",
      "bussin": "Really good or awesome",
      "vibe": "Mood or atmosphere",
      "slaps": "Really good (like music or food)"
    };

    function getRandomLoadingMessage() { return loadingMessages[Math.floor(Math.random() * loadingMessages.length)]; }
    function getRandomWordOfDay() { return genZWords[Math.floor(Math.random() * genZWords.length)]; }
    function inferMood(output) {
      return output.includes("great") || output.includes("cool") || output.includes("lit") || output.includes("slay") ? "Positive" :
             output.includes("sad") || output.includes("bad") || output.includes("sus") ? "Negative" : "Neutral";
    }
    function replaceSlang(text) {
      return text.replace(/\b(lit|slay|bet|yeet|fr fr|pop off|no cap|bussin|vibe|slaps)\b/gi, match => `<span title="${slangMap[match.toLowerCase()] || 'Slang meaning'}">${match}</span>`);
    }
    function sanitizeHTML(str) {
      const div = document.createElement("div");
      div.textContent = str;
      return div.innerHTML;
    }
    function formatApiResponse(text) {
      const lines = text.split('\n').filter(line => line.trim());
      let html = '';
      let inList = false;

      for (const line of lines) {
        if (line.startsWith('**') && line.endsWith('**')) {
          if (inList) {
            html += '</ul>';
            inList = false;
          }
          const section = line.replace(/\*\*/g, '').trim();
          html += `<strong>${sanitizeHTML(section)}</strong><br>`;
        } else if (line.startsWith('* ')) {
          if (!inList) {
            html += '<ul>';
            inList = true;
          }
          const item = line.replace(/^\* /, '').trim();
          html += `<li>${sanitizeHTML(item)}</li>`;
        }
      }
      if (inList) html += '</ul>';
      return html;
    }

    const wordOfDay = getRandomWordOfDay();
    document.getElementById("wordOfDay").textContent = `Word of the Day: ${wordOfDay.word} - ${wordOfDay.meaning}`;

    function toggleTheme() {
      isDarkMode = !isDarkMode;
      document.body.classList.toggle("dark-mode");
      document.getElementById("themeButton").textContent = isDarkMode ? "üåö" : "üåü";
    }
    function copyOutput() {
      const outputText = document.getElementById("outputText").textContent;
      navigator.clipboard.writeText(outputText).then(() => {
        alert("Output copied to clipboard! üòé");
      }).catch(err => {
        alert("Failed to copy output. Check console for details.");
      });
    }
    async function callGenZApi(inputText, action) {
      // Easter egg
      if (inputText.toLowerCase() === "i'm tired") {
        return { success: true, output: "**English Gen Z Slang:**\n* I‚Äôm in my flop era üò©\n**Hinglish Mix:**\n* Bhai, main toh thak gaya üò¥" };
      }

      const apiUrl = "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent";
      const primaryApiKey = "AIzaSyDMepOWMQbY8ms295OFCcp8XHQ8iFiB5f0";
      const fallbackApiKey = "sk-de4c1b8bd5804c248bca3b66e47b5e71";
      let prompt;
      if (action === "convert") {
        prompt = `Convert the following text to super trendy Gen Z slang for English (e.g., "vibe," "slaps," "no cap," "bussin") and mix Gen Z slang with Hindi phrases for Hinglish (e.g., "bhai, kya baat," "mast vibe"). Add emojis (e.g., üî•, üò§, ü´∂) to each item for extra Gen Z flair. Provide the output in this exact format:
**English Gen Z Slang:**
* [Slang 1 with emoji]
* [Slang 2 with emoji]
* [Slang 3 with emoji]
* [Add more if relevant]
**Hinglish Mix:**
* [Hinglish 1 with emoji]
* [Hinglish 2 with emoji]
* [Hinglish 3 with emoji]
* [Add more if relevant]
Do not include any additional paragraphs or explanations.
Text: "${inputText}"`;
      } else if (action === "reply") {
        prompt = `Generate a super trendy Gen Z-style reply to the following message in English (e.g., "vibe," "slaps," "no cap," "bussin") and mix Gen Z slang with Hindi phrases for Hinglish (e.g., "bhai, kya baat," "mast vibe"). Match the sentiment (positive, negative, neutral), keep it short and trendy, and add emojis (e.g., üî•, üò§, ü´∂) to each item for extra Gen Z flair. Provide the output in this exact format:
**English Gen Z Slang:**
* [Reply 1 with emoji]
* [Reply 2 with emoji]
* [Reply 3 with emoji]
* [Add more if relevant]
**Hinglish Mix:**
* [Hinglish Reply 1 with emoji]
* [Hinglish Reply 2 with emoji]
* [Hinglish Reply 3 with emoji]
* [Add more if relevant]
Do not include any additional paragraphs or explanations.
Message: "${inputText}"`;
      } else {
        return { success: false, error: "Invalid action" };
      }

      async function attemptApiCall(apiKey, attemptNumber) {
        try {
          const response = await fetch(`${apiUrl}?key=${apiKey}`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              contents: [{ parts: [{ text: prompt }] }],
              generationConfig: { maxOutputTokens: 300, temperature: 0.7 }
            })
          });
          const data = await response.json();
          console.log(`API Response (Attempt ${attemptNumber}, Key: ${apiKey.substring(0, 5)}...):`, {
            status: response.status,
            statusText: response.statusText,
            headers: Object.fromEntries(response.headers.entries()),
            body: data
          });
          if (!response.ok) {
            return { success: false, error: data.error?.message || `HTTP error: ${response.status} ${response.statusText}` };
          }
          if (data.candidates && data.candidates[0]?.content?.parts[0]?.text) {
            return { success: true, output: data.candidates[0].content.parts[0].text.trim() };
          }
          return { success: false, error: data.error?.message || "Invalid response format: No candidates found" };
        } catch (error) {
          console.error(`API request failed (Attempt ${attemptNumber}, Key: ${apiKey.substring(0, 5)}...):`, {
            message: error.message,
            stack: error.stack
          });
          return { success: false, error: `API request failed: ${error.message}` };
        }
      }

      // Try primary API key
      let response = await attemptApiCall(primaryApiKey, 1);
      if (response.success) return response;

      // If primary fails with transient error, retry with fallback key
      if (!response.success && (response.error.includes("429") || response.error.includes("503"))) {
        console.log("Transient error detected, retrying with fallback key after 1s...");
        await new Promise(resolve => setTimeout(resolve, 1000));
        response = await attemptApiCall(fallbackApiKey, 2);
        if (response.success) return response;
      }

      // If both attempts fail, return mock response
      console.warn("Both API attempts failed, returning mock response...");
      const mockResponse = action === "convert" ?
        `**English Gen Z Slang:**
* Yo, this slaps! üî•
* Totally bussin'! üòé
**Hinglish Mix:**
* Bhai, mast vibe hai! ü´∂
* Sab kuch lit hai! ‚ú®` :
        `**English Gen Z Slang:**
* Bet, I'm down! üòé
* No cap, it's fire! üî•
**Hinglish Mix:**
* Bhai, kya baat hai! ü´∂
* Full-on vibe check pass! ‚ú®`;
      return { success: true, output: mockResponse };
    }
    async function genZConvert() {
      const inputText = document.getElementById("inputText").value.trim();
      if (inputText === "") { alert("Type something first!"); return; }
      document.getElementById("outputText").innerHTML = replaceSlang(getRandomLoadingMessage());
      await new Promise(resolve => setTimeout(resolve, 3000));
      const response = await callGenZApi(inputText, "convert");
      if (response.success) {
        let output = formatApiResponse(response.output);
        const mood = inferMood(output);
        output = replaceSlang(output);
        document.getElementById("outputText").innerHTML = output;
        document.getElementById("outputSection").style.animation = "pulse 1s ease-in-out"; // Re-trigger pulse
      } else {
        alert(`Error: ${response.error}. Check console for details.`);
        document.getElementById("outputText").textContent = `Oops, something broke! üòÖ Error: ${response.error}`;
      }
    }
    async function genZReply() {
      const inputText = document.getElementById("inputText").value.trim();
      if (inputText === "") { alert("Type something first!"); return; }
      document.getElementById("outputText").innerHTML = replaceSlang(getRandomLoadingMessage());
      await new Promise(resolve => setTimeout(resolve, 3000));
      const response = await callGenZApi(inputText, "reply");
      if (response.success) {
        let output = formatApiResponse(response.output);
        const mood = inferMood(output);
        output = replaceSlang(output);
        document.getElementById("outputText").innerHTML = output;
        document.getElementById("outputSection").style.animation = "pulse 1s ease-in-out"; // Re-trigger pulse
      } else {
        alert(`Error: ${response.error}. Check console for details.`);
        document.getElementById("outputText").textContent = `Oops, something broke! üòÖ Error: ${response.error}`;
      }
    }
  </script>
</body>
</html>